<main>
  <!-- SECCIÓN DE CLASES -->
  <section class="classes-section">
    <h2>Clases de vehículos</h2>

    <div *ngIf="loading" class="loader-container">
      <app-loader></app-loader>
    </div>

    <div class="classes-container">
      <div class="class-card" *ngFor="let c of classes">
        <h3>{{ c.name }}</h3>

        <p class="class-description">
          {{ c.description }}
        </p>

        <span class="vehicle-count">
          {{ c.vehicle_count }} vehículos
        </span>

        <a
          [routerLink]="['/vehicles', c.id]"
          class="btn"
        >
          Ver vehículos
        </a>
        <button 
          class="delete-btn"
          [disabled]="c.vehicle_count > 0"
          title="No se puede borrar una clase con vehículos asignados"
          *ngIf="isAdmin && c.vehicle_count === 0"
          (click)="deleteClass(c.id)"
        >
          Eliminar clase
        </button>
      </div>
    </div>

    <button class="add-btn" *ngIf="isAdmin" (click)="startAdd()">Añadir clase</button>

    <div *ngIf="addingClass" class="edit-form">
      <h3>Añadir clase</h3>

      <input type="text" [(ngModel)]="addingClass.name" placeholder="Nombre" />
      <input type="text" [(ngModel)]="addingClass.model" placeholder="Description" />

      <div class="form-buttons">
        <button class="save-btn" (click)="addClass()">Guardar</button>
        <button class="cancel-btn" (click)="addingClass = null">Cancelar</button>
      </div>
    </div>
  </section>
</main>
